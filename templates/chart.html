<!DOCTYPE html>
<html>
<head>
    <title>Grade Chart</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <canvas id="gradeChart"></canvas>

    <script>
        fetch('/grades')
            .then(response => response.json())
            .then(data => {
                const studentIDs = data.map(row => row[0]);
                const grades = data.map(row => [row[1], row[2], row[3], row[4], row[5], row[6], row[7], row[8]]);

                const ctx = document.getElementById('gradeChart').getContext('2d');
                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['s1', 's2', 's3', 's4', 's5', 's6', 's7', 's8'],
                        datasets: studentIDs.map((id, index) => ({
                            label: `Student ${id}`,
                            data: grades[index],
                            fill: false,
                            borderColor: getRandomColor(),
                            tension: 0.4
                        }))
                    },
                    options: {
                        indexAxis: 'y', // Interchange x and y-axis
                        scales: {
                            x: {
                                beginAtZero: true,
                                max: 10
                            }
                        }
                    }
                });
            });

        // Function to generate random colors
        function getRandomColor() {
            const letters = '0123456789ABCDEF';
            let color = '#';
            for (let i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }
    </script>
</body>
</html>
